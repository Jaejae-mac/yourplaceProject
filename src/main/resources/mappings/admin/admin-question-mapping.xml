<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="QuestionDAO">
	<resultMap type="myQuestion" id="questionResult">
		<id property="reprtSeq" column="reprt_seq" />
		<result property="rsvNum" column="rsv_num" />
		<result property="userId" column="user_id" />
		<result property="reprtContent" column="reprt_content" />
		<result property="reprtDoneYn" column="reprt_done_yn" />
		<result property="userType" column="user_type" />
		<result property="userEmail" column="user_email" />
	</resultMap>

	<!-- 전체조회 -->
	<select id="getQue" resultMap="questionResult">
		SELECT
			reprt_done_yn, reprt_seq, rsv_num, 
		    (SELECT user_type FROM member WHERE user_id = a.user_id) as user_type,
		    user_id,
		    (SELECT user_email FROM member WHERE user_id = a.user_id) as user_email,
		    reprt_content
		FROM question a;
	</select>
	
	<!-- 문의 처리(Y)으로 -->
	<update id="yQue">
		UPDATE question SET reprt_done_yn = 'Y' WHERE reprt_seq = #{reprtSeq}
	</update>
	
	<!-- 문의 미처리(N)으로 -->
	<update id="nQue">
		UPDATE question SET reprt_done_yn = 'N' WHERE reprt_seq = #{reprtSeq}
	</update>
	
	

</mapper>